import"./modulepreload-polyfill-B5Qt9EMX.js";async function y(e){try{const n=await(await fetch("https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=50&page=1")).json(),c=document.getElementById("fromCoin"),i=document.getElementById("toCoin");n.forEach(o=>{e[o.id]=o.image;const m=document.createElement("option");m.value=o.id,m.textContent=`${o.symbol.toUpperCase()}`,c.appendChild(m);const s=document.createElement("option");s.value=o.id,s.textContent=`${o.symbol.toUpperCase()}`,i.appendChild(s)})}catch(t){console.error("Помилка завантаження криптовалют:",t)}}function d(e,t,n){const c=document.getElementById(e),i=document.getElementById(t),o=c.value;i.src=n[o]||""}const r={};async function a(){const e=parseFloat(document.getElementById("amount").value),t=document.getElementById("fromCoin").value,n=document.getElementById("toCoin").value,c=document.getElementById("result"),i=document.getElementById("com");if(isNaN(e)||e<=0||!t||!n){c.textContent="";return}try{const o=`https://api.coingecko.com/api/v3/simple/price?ids=${t},${n}&vs_currencies=usd`,s=await(await fetch(o)).json(),l=s[t].usd,p=s[n].usd,u=e*l/p,f=u*p,C=Math.floor(e*.0025*1e5)/1e5,g=Math.floor(C*l*1e5)/1e5;c.textContent=`= ${u.toFixed(6)} ${n.toUpperCase()} ($${f.toFixed(2)})`,i.textContent=`Expected commision ${C} ${t.toUpperCase()} ($${g} )`}catch(o){c.textContent="Сталася помилка. Спробуйте пізніше.",console.error(o)}}document.addEventListener("DOMContentLoaded",async()=>{await y(r);const e=document.getElementById("fromCoin"),t=document.getElementById("toCoin");e.options.length>1&&(e.selectedIndex=1),t.options.length>1&&(t.selectedIndex=2),d("fromCoin","fromIcon",r),d("toCoin","toIcon",r),a(),document.getElementById("amount").addEventListener("input",a),e.addEventListener("change",()=>{d("fromCoin","fromIcon",r),a()}),t.addEventListener("change",()=>{d("toCoin","toIcon",r),a()})});
